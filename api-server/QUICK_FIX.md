# ğŸš¨ å¿«é€Ÿä¿®å¤æŒ‡å—ï¼šçˆ¬è™«æ˜¾ç¤ºç™½å±é—®é¢˜

## é—®é¢˜è¯Šæ–­

ä½ çš„çˆ¬è™«æ‰“ä¸å¼€ Temu ç½‘ç«™ï¼Œåªæ˜¾ç¤ºç™½å±ã€‚è¿™é€šå¸¸æ˜¯ç”±äº Temu çš„åçˆ¬è™«æœºåˆ¶ã€‚

## âœ… æˆ‘å·²ç»åšäº†ä»¥ä¸‹æ”¹è¿›

### 1. å¢å¼ºçš„åæ£€æµ‹åŠŸèƒ½

- âœ… æ›´çœŸå®çš„ User-Agent å’Œæµè§ˆå™¨æŒ‡çº¹
- âœ… å®Œæ•´çš„ Sec-Fetch headers
- âœ… å…ˆè®¿é—®é¦–é¡µå»ºç«‹ session
- âœ… Canvas æŒ‡çº¹å¤„ç†
- âœ… ç½‘ç»œç­‰å¾…ç­–ç•¥ä»`domcontentloaded`æ”¹ä¸º`networkidle2`

### 2. è¯Šæ–­å·¥å…·

- âœ… è‡ªåŠ¨ä¿å­˜é¡µé¢æˆªå›¾
- âœ… ä¿å­˜å®Œæ•´ HTML ç”¨äºåˆ†æ
- âœ… æ‹¦æˆªå’Œè®°å½•æ‰€æœ‰ API è¯·æ±‚
- âœ… è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

## ğŸš€ ç«‹å³è¿è¡Œè¯Šæ–­

### æ­¥éª¤ 1ï¼šè¿è¡Œè¯Šæ–­è„šæœ¬

```bash
cd api-server
npm run test:diagnose
```

è¿™ä¼šï¼š

1. æ‰“å¼€ä¸€ä¸ªå¯è§çš„æµè§ˆå™¨çª—å£ï¼ˆä½ å¯ä»¥çœ‹åˆ°å‘ç”Ÿäº†ä»€ä¹ˆï¼‰
2. è®¿é—® Temu é¦–é¡µå’Œæœç´¢é¡µé¢
3. ä¿å­˜æˆªå›¾åˆ° `./data/bestsellers/` ç›®å½•
4. è®°å½•æ‰€æœ‰ API è¯·æ±‚

### æ­¥éª¤ 2ï¼šæŸ¥çœ‹æˆªå›¾

è¯Šæ–­è¿è¡Œåï¼Œæ£€æŸ¥è¿™äº›æ–‡ä»¶ï¼š

```
api-server/data/bestsellers/
â”œâ”€â”€ homepage-{timestamp}.png      â† é¦–é¡µæˆªå›¾
â”œâ”€â”€ search-phone-case-{timestamp}.png  â† æœç´¢é¡µæˆªå›¾
â”œâ”€â”€ search-phone-case-{timestamp}.html â† é¡µé¢HTML
â””â”€â”€ api-requests-{timestamp}.json     â† APIè¯·æ±‚è®°å½•
```

## ğŸ” æ ¹æ®æˆªå›¾åˆ¤æ–­é—®é¢˜

### æƒ…å†µ 1ï¼šæˆªå›¾æ˜¾ç¤ºéªŒè¯ç 

**è¯´æ˜**: Temu æ£€æµ‹åˆ°äº†è‡ªåŠ¨åŒ–è®¿é—®

**è§£å†³æ–¹æ¡ˆ**:

1. **ä½¿ç”¨ä»£ç† IP**ï¼ˆæ¨èï¼‰
2. **ä½¿ç”¨çœŸå® Cookie**
3. **é™ä½è¯·æ±‚é¢‘ç‡**
4. **åˆ‡æ¢åˆ° API æ–¹æ¡ˆ**ï¼ˆè§ä¸‹æ–‡ï¼‰

### æƒ…å†µ 2ï¼šæˆªå›¾æ˜¾ç¤ºæ­£å¸¸é¡µé¢ï¼Œä½†æ²¡æœ‰äº§å“

**è¯´æ˜**: é¡µé¢ç»“æ„å¯èƒ½å‘ç”Ÿäº†å˜åŒ–

**è§£å†³æ–¹æ¡ˆ**:

1. æŸ¥çœ‹ `search-*.html` æ–‡ä»¶
2. åœ¨ HTML ä¸­æœç´¢äº§å“ä¿¡æ¯
3. æ›´æ–°é€‰æ‹©å™¨ä»£ç 

### æƒ…å†µ 3ï¼šæˆªå›¾å®Œå…¨ç©ºç™½

**è¯´æ˜**: é¡µé¢æ²¡æœ‰åŠ è½½æˆ–è¢«é‡å®šå‘

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å°è¯•å¢åŠ ç­‰å¾…æ—¶é—´
3. æŸ¥çœ‹ console è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯

## ğŸ¯ æ¨èæ–¹æ¡ˆï¼šä½¿ç”¨ Temu API

æ ¹æ® Reddit è®¨è®ºï¼Œæœ€å¯é çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Temu çš„å†…éƒ¨ APIï¼š

### 1. ä½¿ç”¨è¯Šæ–­å·¥å…·æ‰¾åˆ° API ç«¯ç‚¹

è¿è¡Œè¯Šæ–­åï¼ŒæŸ¥çœ‹ `api-requests-{timestamp}.json` æ–‡ä»¶ï¼š

```json
[
  {
    "url": "https://api.temu.com/api/oak/search/list",
    "method": "POST",
    "headers": {
      "anti-token": "xxx",
      ...
    },
    "postData": "{\"searchKey\":\"phone case\",\"sign\":\"xxx\"}",
    "timestamp": "2024-..."
  }
]
```

### 2. åˆ†æç­¾åç”Ÿæˆ

æ‰“å¼€ Chrome DevTools:

1. F12 â†’ Network æ ‡ç­¾
2. æœç´¢ "phone case"
3. æ‰¾åˆ° API è¯·æ±‚
4. å³é”® â†’ Copy â†’ Copy as cURL
5. åˆ†æè¯·æ±‚å‚æ•°

### 3. å®ç° API è°ƒç”¨ï¼ˆç¤ºä¾‹ï¼‰

å¦‚æœä½ æ‰¾åˆ°äº† API ç«¯ç‚¹ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼š

```typescript
// åˆ›å»º api-server/src/temu-api.ts
import axios from "axios";

export async function searchTemuAPI(keyword: string) {
  // æ ¹æ®ä½ åˆ†æçš„ç»“æœå¡«å†™
  const response = await axios.post(
    "https://api.temu.com/api/xxx",
    {
      searchKey: keyword,
      // å…¶ä»–å‚æ•°...
    },
    {
      headers: {
        "User-Agent": "Mozilla/5.0...",
        // å…¶ä»–headers...
      },
    }
  );

  return response.data;
}
```

## ğŸ› ï¸ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ä»£ç†

å®‰è£…ä»£ç†æ’ä»¶ï¼š

```bash
npm install puppeteer-page-proxy
```

ä¿®æ”¹ `scraper.ts`:

```typescript
import useProxy from "puppeteer-page-proxy";

// åœ¨page.gotoä¹‹å‰
await useProxy(page, "http://your-proxy:port");
```

### æ–¹æ¡ˆ Bï¼šä½¿ç”¨çœŸå® Cookie

1. æ‰‹åŠ¨ç™»å½• Temu
2. å¤åˆ¶ Cookie
3. åœ¨ scraper ä¸­ä½¿ç”¨ï¼š

```typescript
await page.setCookie({
  name: "xxx",
  value: "xxx",
  domain: ".temu.com",
});
```

### æ–¹æ¡ˆ Cï¼šå¢åŠ ç­‰å¾…æ—¶é—´

å¦‚æœåªæ˜¯åŠ è½½æ…¢ï¼š

```typescript
// åœ¨ scraper.ts ä¸­å¢åŠ ç­‰å¾…æ—¶é—´
await this.delay(10000); // ç­‰å¾…10ç§’
```

## ğŸ“Š è¿è¡ŒæœåŠ¡å™¨æµ‹è¯•

å¯åŠ¨ API æœåŠ¡å™¨ï¼ˆå¯è§æµè§ˆå™¨æ¨¡å¼ï¼‰ï¼š

```bash
cd api-server
npm run start:visible
```

åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•ï¼š

```bash
curl -X POST http://localhost:3001/api/search-bestsellers \
  -H "Content-Type: application/json" \
  -d '{"keywords": ["phone", "case"]}'
```

## ğŸ“š æ›´å¤šå¸®åŠ©

- `TEMU_API_GUIDE.md` - è¯¦ç»†çš„ API é€†å‘æŒ‡å—
- `README.md` - åŸºç¡€ä½¿ç”¨æ–‡æ¡£
- Reddit è®¨è®ºä¸­æåˆ°çš„æˆåŠŸæ¡ˆä¾‹éœ€è¦é€†å‘ç­¾åç®—æ³•

## âš¡ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# è¯Šæ–­é—®é¢˜ï¼ˆæ˜¾ç¤ºæµè§ˆå™¨ï¼‰
npm run test:diagnose

# å¯åŠ¨æœåŠ¡ï¼ˆæ˜¾ç¤ºæµè§ˆå™¨+è°ƒè¯•ï¼‰
npm run start:visible

# æ™®é€šå¯åŠ¨
npm start
```

## ğŸ¯ é¢„æœŸç»“æœ

è¿è¡Œ `npm run test:diagnose` åï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. âœ… æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€
2. âœ… è®¿é—® Temu é¦–é¡µ
3. âœ… æ‰§è¡Œæœç´¢
4. âœ… ç”Ÿæˆæˆªå›¾æ–‡ä»¶
5. âœ… æ§åˆ¶å°æ˜¾ç¤ºæ‰¾åˆ°çš„äº§å“æ•°é‡

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š

```
âœ… æ‰¾åˆ° 3 ä¸ªäº§å“

å‰3ä¸ªäº§å“é¢„è§ˆ:
1. Premium Phone Case for iPhone 15...
   ä»·æ ¼: $9.99
   é”€é‡: 50000
   å›¾ç‰‡: 8 å¼ 
```

å¦‚æœçœ‹åˆ°é—®é¢˜ï¼Œæˆªå›¾ä¼šå‘Šè¯‰ä½ å…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜ï¼
