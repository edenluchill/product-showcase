# âœ… çˆ¬è™«ç³»ç»Ÿå®ç°å®Œæˆ

## ğŸ¯ å·²å®Œæˆçš„åŠŸèƒ½

### 1. âœ… Temu çˆ¬è™«æ ¸å¿ƒ

- æ–‡ä»¶ï¼š`scripts/scraper/temu-scraper.ts`
- åŠŸèƒ½ï¼š
  - æœç´¢äº§å“
  - æå–äº§å“ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€ä»·æ ¼ã€é”€é‡ã€è¯„åˆ†ï¼‰
  - è·å–æ‰€æœ‰äº§å“å›¾ç‰‡ï¼ˆ20+å¼ ï¼‰
  - ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°
  - ä¿å­˜æ•°æ®ä¸º JSON

### 2. âœ… æ•°æ®è½¬æ¢å™¨

- æ–‡ä»¶ï¼š`scripts/convert-scraped-data.ts`
- åŠŸèƒ½ï¼š
  - è¯»å–çˆ¬å–çš„ JSON æ•°æ®
  - è½¬æ¢ä¸ºåº”ç”¨æ ¼å¼
  - ç”Ÿæˆ TypeScript æ–‡ä»¶
  - åŒ…å«å…ƒæ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯

### 3. âœ… NPM è„šæœ¬

- `npm run scrape` - è¿è¡Œçˆ¬è™«
- `npm run scrape:test` - æµ‹è¯•æ¨¡å¼
- `npm run convert-data` - è½¬æ¢æ•°æ®

### 4. âœ… æ–‡æ¡£

- `scripts/scraper/README.md` - è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
- `SCRAPER_QUICKSTART.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- `.gitignore` - å¿½ç•¥çˆ¬å–çš„æ•°æ®

---

## ğŸ“¦ ä¾èµ–å®‰è£…

```bash
npm install
```

æ–°å¢çš„åŒ…ï¼š

- `puppeteer` - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- `axios` - HTTP è¯·æ±‚å’Œå›¾ç‰‡ä¸‹è½½
- `tsx` - TypeScript æ‰§è¡Œå™¨

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### å®Œæ•´æµç¨‹ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. æµ‹è¯•çˆ¬è™«ï¼ˆå°è§„æ¨¡ï¼‰
npm run scrape:test

# 3. æ£€æŸ¥æ•°æ®
ls -R data/bestsellers/

# 4. å¦‚æœæ»¡æ„ï¼Œè¿è¡Œå®Œæ•´çˆ¬å–
npm run scrape

# 5. è½¬æ¢æ•°æ®æ ¼å¼
npm run convert-data

# 6. æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
cat src/lib/bestsellers-generated.ts

# 7. é›†æˆåˆ°åº”ç”¨
# ç¼–è¾‘ src/lib/bestsellers.ts
```

### æ—¥å¸¸æ›´æ–°æµç¨‹

```bash
# æ¯å‘¨è¿è¡Œä¸€æ¬¡
npm run scrape && npm run convert-data
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
project/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ scraper/
â”‚   â”‚   â”œâ”€â”€ temu-scraper.ts        # â­ Temuçˆ¬è™«æ ¸å¿ƒ
â”‚   â”‚   â””â”€â”€ README.md              # æŠ€æœ¯æ–‡æ¡£
â”‚   â””â”€â”€ convert-scraped-data.ts    # â­ æ•°æ®è½¬æ¢å™¨
â”‚
â”œâ”€â”€ data/                           # â­ çˆ¬å–çš„æ•°æ®ï¼ˆä¸æäº¤åˆ°gitï¼‰
â”‚   â””â”€â”€ bestsellers/
â”‚       â”œâ”€â”€ womens-jeans.json      # äº§å“å…ƒæ•°æ®
â”‚       â”œâ”€â”€ mens-t-shirt.json
â”‚       â””â”€â”€ images/                # ä¸‹è½½çš„å›¾ç‰‡
â”‚           â”œâ”€â”€ temu-product-1/
â”‚           â”‚   â”œâ”€â”€ image_1.jpg
â”‚           â”‚   â””â”€â”€ image_20.jpg
â”‚           â””â”€â”€ ...
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ bestsellers.ts          # æ‰‹åŠ¨ç®¡ç†çš„æ¨¡æ¿
â”‚       â””â”€â”€ bestsellers-generated.ts # â­ è‡ªåŠ¨ç”Ÿæˆ
â”‚
â”œâ”€â”€ package.json                    # â­ æ–°å¢çˆ¬è™«è„šæœ¬
â”œâ”€â”€ .gitignore                      # â­ å¿½ç•¥data/ç›®å½•
â”œâ”€â”€ SCRAPER_QUICKSTART.md           # â­ å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ SCRAPER_IMPLEMENTATION.md       # æœ¬æ–‡æ¡£
â””â”€â”€ BESTSELLER_REPLICATION_SYSTEM.md # ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### çˆ¬è™«é…ç½®

åœ¨ `scripts/scraper/temu-scraper.ts` ä¸­ï¼š

```typescript
const scraper = new TemuScraper({
  headless: true, // æ— å¤´æ¨¡å¼
  maxProducts: 10, // æ¯ç±»åˆ«æœ€å¤š10ä¸ª
  downloadImages: true, // ä¸‹è½½å›¾ç‰‡
  outputDir: "./data/bestsellers",
  delay: 2000, // 2ç§’å»¶è¿Ÿ
});
```

### çˆ¬å–çš„ç±»åˆ«

```typescript
const categories = ["womens jeans", "mens t-shirt", "womens dress", "sneakers"];
```

---

## ğŸ“Š æ•°æ®æ ¼å¼

### çˆ¬å–çš„åŸå§‹æ•°æ®

```json
{
  "id": "temu-12345",
  "url": "https://temu.com/...",
  "title": "Women's 2025 Loose Wide Leg Jeans",
  "price": 30.58,
  "sales": 77000,
  "rating": 4.7,
  "reviews": 12543,
  "images": ["https://img.temu.com/img1.jpg", "https://img.temu.com/img2.jpg"],
  "category": "womens jeans",
  "scrapedAt": "2025-01-15T10:30:00Z"
}
```

### è½¬æ¢åçš„åº”ç”¨æ ¼å¼

```typescript
{
  id: "temu-womens-jeans-1",
  platform: "temu",
  productName: "Women's 2025 Loose Wide Leg Jeans",
  sales: 77000,
  rating: 4.7,
  reviews: 12543,
  thumbnailUrl: "https://...",
  imageCount: 20,
  productUrl: "https://...",
  images: [
    {
      url: "https://...",
      index: 1,
      type: "main"
    },
    {
      url: "https://...",
      index: 2,
      type: "detail"
    }
  ]
}
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. æ³•å¾‹å’Œé“å¾·

```
âœ… å¯ä»¥åšï¼š
  - å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
  - å°è§„æ¨¡æ•°æ®æ”¶é›†
  - å…¬å¼€å¯è®¿é—®çš„æ•°æ®

âš ï¸ éœ€è°¨æ…ï¼š
  - å•†ä¸šç”¨é€”
  - å¤§è§„æ¨¡çˆ¬å–
  - é•¿æœŸè¿è¡Œ

âŒ ä¸è¦åšï¼š
  - çˆ¬å–ç”¨æˆ·éšç§æ•°æ®
  - å¯¹æœåŠ¡å™¨é€ æˆè¿‡å¤§å‹åŠ›
  - è¿åç½‘ç«™ToS
```

### 2. æŠ€æœ¯é™åˆ¶

- **ç½‘ç«™ç»“æ„å¯èƒ½å˜åŒ–** - é€‰æ‹©å™¨éœ€è¦å®šæœŸæ›´æ–°
- **IP å¯èƒ½è¢«å°** - ä½¿ç”¨åˆç†çš„å»¶è¿Ÿ
- **å›¾ç‰‡ URL å¯èƒ½å¤±æ•ˆ** - å»ºè®®ä¸‹è½½åˆ°æœ¬åœ°

### 3. ç»´æŠ¤å»ºè®®

- æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡çˆ¬è™«æ˜¯å¦æ­£å¸¸
- ç½‘ç«™æ›´æ–°ååŠæ—¶è°ƒæ•´é€‰æ‹©å™¨
- å®šæœŸæ¸…ç†æ—§æ•°æ®

---

## ğŸ”„ ä»çˆ¬è™«è¿ç§»è®¡åˆ’

### Phase 1: çˆ¬è™«ï¼ˆå½“å‰ï¼‰ âœ…

```
âœ… å·²å®ç°Temuçˆ¬è™«
âœ… è‡ªåŠ¨æ•°æ®è½¬æ¢
âœ… æœ¬åœ°å›¾ç‰‡å­˜å‚¨
```

### Phase 2: åŠè‡ªåŠ¨ï¼ˆä¸‹ä¸€æ­¥ï¼‰

```
â³ çˆ¬è™«è·å–å€™é€‰äº§å“
â³ è¿è¥å›¢é˜Ÿäººå·¥å®¡æ ¸
â³ é€‰æ‹©é«˜è´¨é‡æ¨¡æ¿
â³ æ ‡æ³¨å›¾ç‰‡ç±»å‹ï¼ˆæ­£é¢ã€ä¾§é¢ç­‰ï¼‰
```

### Phase 3: äººå·¥ä¸ºä¸»ï¼ˆä¸­æœŸï¼‰

```
â¸ï¸ å»ºç«‹CMSç®¡ç†ç•Œé¢
â¸ï¸ è¿è¥å›¢é˜Ÿä¸»è¦æ·»åŠ 
â¸ï¸ çˆ¬è™«ç”¨äºè¶‹åŠ¿å‘ç°
```

### Phase 4: API/å®Œå…¨äººå·¥ï¼ˆé•¿æœŸï¼‰

```
â¸ï¸ ä½¿ç”¨å®˜æ–¹APIï¼ˆå¦‚æœå¯ç”¨ï¼‰
â¸ï¸ æˆ–å®Œå…¨äººå·¥ç²¾é€‰
â¸ï¸ çˆ¬è™«ä»…ä½œå¤‡ä»½
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: çˆ¬è™«è¿è¡Œå¤±è´¥

**ç—‡çŠ¶**ï¼š

```
Error: Navigation timeout
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å¢åŠ è¶…æ—¶æ—¶é—´
3. ä½¿ç”¨ `headless: false` æŸ¥çœ‹æµè§ˆå™¨

```typescript
await page.goto(url, {
  waitUntil: "networkidle2",
  timeout: 60000, // å¢åŠ åˆ°60ç§’
});
```

### é—®é¢˜ 2: é€‰æ‹©å™¨æ‰¾ä¸åˆ°å…ƒç´ 

**ç—‡çŠ¶**ï¼š

```
No products found
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ‰“å¼€æµè§ˆå™¨è°ƒè¯•
2. æ£€æŸ¥ HTML ç»“æ„
3. æ›´æ–°é€‰æ‹©å™¨

```bash
npm run scrape:test  # æ˜¾ç¤ºæµè§ˆå™¨
```

### é—®é¢˜ 3: å›¾ç‰‡ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š

```
Download failed: timeout
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. å¢åŠ è¶…æ—¶æ—¶é—´
2. æ·»åŠ é‡è¯•é€»è¾‘
3. æ£€æŸ¥å›¾ç‰‡ URL

```typescript
const response = await axios.get(imageUrl, {
  timeout: 30000, // 30ç§’
  maxRetries: 3,
});
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å½“å‰æ€§èƒ½

```
å•ä¸ªäº§å“: ~5ç§’
10ä¸ªäº§å“: ~50ç§’
ä¸‹è½½20å¼ å›¾: ~10ç§’
æ€»è®¡: ~60ç§’/äº§å“
```

### ä¼˜åŒ–å»ºè®®

#### 1. å¹¶å‘ä¸‹è½½å›¾ç‰‡

```typescript
import pLimit from "p-limit";

const limit = pLimit(5); // åŒæ—¶ä¸‹è½½5å¼ 

const promises = images.map((url, i) => limit(() => downloadImage(url, i)));

await Promise.all(promises);
```

#### 2. ç¼“å­˜å·²çˆ¬å–çš„äº§å“

```typescript
const cache = new Map();

if (cache.has(productId)) {
  return cache.get(productId);
}
```

#### 3. æ–­ç‚¹ç»­çˆ¬

```typescript
const checkpoint = loadCheckpoint();

for (let i = checkpoint; i < products.length; i++) {
  // çˆ¬å–...
  saveCheckpoint(i);
}
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³å¯åš

1. âœ… **æµ‹è¯•çˆ¬è™«**

   ```bash
   npm run scrape:test
   ```

2. âœ… **æ£€æŸ¥æ•°æ®è´¨é‡**

   ```bash
   cat data/bestsellers/*.json | jq
   ```

3. âœ… **è½¬æ¢æ•°æ®**
   ```bash
   npm run convert-data
   ```

### æœ¬å‘¨å†…

1. **çˆ¬å–çœŸå®æ•°æ®**

   - è¿è¡Œå®Œæ•´çˆ¬å–
   - è‡³å°‘ 4-5 ä¸ªç±»åˆ«
   - æ¯ä¸ªç±»åˆ« 10 ä¸ªäº§å“

2. **é›†æˆåˆ°åº”ç”¨**

   - ä½¿ç”¨ç”Ÿæˆçš„æ•°æ®
   - æµ‹è¯•äº§å“é€‰æ‹©æµç¨‹
   - éªŒè¯å›¾ç‰‡æ˜¾ç¤º

3. **ä¼˜åŒ–å’Œè°ƒæ•´**
   - æ ¹æ®å®é™…ç»“æœè°ƒæ•´é€‰æ‹©å™¨
   - ä¼˜åŒ–æ•°æ®è´¨é‡
   - æ·»åŠ æ›´å¤šç±»åˆ«

### æœ¬æœˆå†…

1. **å»ºç«‹äººå·¥å®¡æ ¸æµç¨‹**

   - è¿è¥å›¢é˜Ÿç­›é€‰é«˜è´¨é‡äº§å“
   - æ ‡æ³¨æ¯å¼ å›¾ç‰‡çš„ç±»å‹
   - å»ºç«‹è´¨é‡æ ‡å‡†

2. **å®ç°æ‰¹é‡ç”Ÿæˆ**

   - åŸºäºçˆ¬å–çš„äº§å“
   - å®ç°å›¾ç‰‡é£æ ¼åˆ†æ
   - æµ‹è¯•å®Œæ•´ç”Ÿæˆæµç¨‹

3. **æ¢ç´¢ API æ–¹æ¡ˆ**
   - ç ”ç©¶ Temu æ˜¯å¦æœ‰å®˜æ–¹ API
   - æˆ–ä¸å•†å®¶åˆä½œè·å–æ•°æ®
   - è¯„ä¼°é•¿æœŸå¯æŒç»­æ–¹æ¡ˆ

---

## ğŸ“ æ–‡æ¡£ç´¢å¼•

- **å¿«é€Ÿå¼€å§‹**: `SCRAPER_QUICKSTART.md`
- **æŠ€æœ¯æ–‡æ¡£**: `scripts/scraper/README.md`
- **ç³»ç»Ÿè®¾è®¡**: `BESTSELLER_REPLICATION_SYSTEM.md`
- **æœ¬æ–‡æ¡£**: `SCRAPER_IMPLEMENTATION.md`

---

## âœ… æ€»ç»“

ä½ ç°åœ¨æœ‰äº†ä¸€ä¸ª**å®Œæ•´çš„çˆ¬è™«ç³»ç»Ÿ**ï¼š

âœ… **æ ¸å¿ƒåŠŸèƒ½**

- Temu äº§å“æœç´¢å’Œçˆ¬å–
- è‡ªåŠ¨ä¸‹è½½æ‰€æœ‰äº§å“å›¾ç‰‡
- æ•°æ®æ ¼å¼è½¬æ¢
- NPM è„šæœ¬é›†æˆ

âœ… **é…å¥—æ–‡æ¡£**

- è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- æ•…éšœæ’é™¤æŒ‡å—
- è¿ç§»è®¡åˆ’

âœ… **å¯æ‰©å±•**

- æ˜“äºæ·»åŠ æ–°å¹³å°ï¼ˆAmazon, Sheinï¼‰
- æ”¯æŒå¤šç§é…ç½®
- æ¨¡å—åŒ–è®¾è®¡

âœ… **ç¬¦åˆæœ€ä½³å®è·µ**

- åˆç†çš„è¯·æ±‚å»¶è¿Ÿ
- é”™è¯¯å¤„ç†
- æ—¥å¿—è¾“å‡º
- .gitignore é…ç½®

**ä¸‹ä¸€æ­¥**ï¼šè¿è¡Œ `npm run scrape:test` å¼€å§‹ä½¿ç”¨ï¼ ğŸš€
